{"level":"info","message":"Email service initialized successfully","service":"ebay-autods-integration","timestamp":"2025-03-31 22:33:07"}
{"level":"info","message":"Successfully connected to database","service":"ebay-autods-integration","timestamp":"2025-03-31 22:33:10"}
{"level":"info","message":"Database connection established","service":"ebay-autods-integration","timestamp":"2025-03-31 22:33:10"}
{"level":"info","message":"Server running on port 3000","service":"ebay-autods-integration","timestamp":"2025-03-31 22:33:10"}
{"level":"info","message":"All schedulers initialized","service":"ebay-autods-integration","timestamp":"2025-03-31 22:33:10"}
{"level":"info","message":"No active eBay tokens found in database","service":"ebay-autods-integration","timestamp":"2025-03-31 22:33:11"}
{"level":"info","message":"Redirecting to eBay authorization page","service":"ebay-autods-integration","timestamp":"2025-03-31 22:35:08"}
{"level":"info","message":"SIGINT received. Shutting down gracefully","service":"ebay-autods-integration","timestamp":"2025-03-31 22:36:10"}
{"level":"info","message":"Email service initialized successfully","service":"ebay-autods-integration","timestamp":"2025-03-31 22:36:21"}
{"level":"info","message":"Successfully connected to database","service":"ebay-autods-integration","timestamp":"2025-03-31 22:36:24"}
{"level":"info","message":"Fetching products from AutoDS for store IDs: 1173617","service":"ebay-autods-integration","timestamp":"2025-03-31 22:36:24"}
{"level":"info","message":"Database connection initialized for AutoDS API","service":"ebay-autods-integration","timestamp":"2025-03-31 22:36:24"}
{"level":"info","message":"No active eBay tokens found in database","service":"ebay-autods-integration","timestamp":"2025-03-31 22:36:25"}
{"level":"info","message":"No active AutoDS token found in database","service":"ebay-autods-integration","timestamp":"2025-03-31 22:36:25"}
{"level":"info","message":"Starting browser-based authentication for AutoDS","service":"ebay-autods-integration","timestamp":"2025-03-31 22:36:25"}
{"level":"info","message":"Navigated to login page","service":"ebay-autods-integration","timestamp":"2025-03-31 22:36:39"}
{"level":"info","message":"Entered login credentials","service":"ebay-autods-integration","timestamp":"2025-03-31 22:36:39"}
{"level":"info","message":"Saved AutoDS token to database","service":"ebay-autods-integration","timestamp":"2025-03-31 22:36:46"}
{"level":"info","message":"Successfully captured and saved auth token","service":"ebay-autods-integration","timestamp":"2025-03-31 22:36:46"}
{"level":"info","message":"Found 124 products from AutoDS","service":"ebay-autods-integration","timestamp":"2025-03-31 22:36:49"}
{"level":"info","message":"No active eBay tokens found in database","service":"ebay-autods-integration","timestamp":"2025-03-31 22:36:49"}
{"level":"info","message":"Starting automated eBay authentication with Puppeteer","service":"ebay-autods-integration","timestamp":"2025-03-31 22:36:49"}
{"level":"info","message":"Starting to poll for eBay authorization codes every 15 seconds","service":"ebay-autods-integration","timestamp":"2025-03-31 22:36:49"}
{"level":"info","message":"Navigating to authorization URL: https://auth.ebay.com/oauth2/authorize?client_id=BruceAlm-automati-PRD-7b004feb6-e473091a&redirect_uri=Bruce_Almanza-BruceAlm-automa-yibdqfgu&response_type=code&scope=https%3A%2F%2Fapi.ebay.com%2Foauth%2Fapi_scope+https%3A%2F%2Fapi.ebay.com%2Foauth%2Fapi_scope%2Fsell.inventory.readonly+https%3A%2F%2Fapi.ebay.com%2Foauth%2Fapi_scope%2Fsell.inventory+https%3A%2F%2Fapi.ebay.com%2Foauth%2Fapi_scope%2Fsell.account.readonly+https%3A%2F%2Fapi.ebay.com%2Foauth%2Fapi_scope%2Fsell.account+https%3A%2F%2Fapi.ebay.com%2Foauth%2Fapi_scope%2Fsell.fulfillment.readonly+https%3A%2F%2Fapi.ebay.com%2Foauth%2Fapi_scope%2Fsell.fulfillment+https%3A%2F%2Fapi.ebay.com%2Foauth%2Fapi_scope%2Fsell.marketing.readonly+https%3A%2F%2Fapi.ebay.com%2Foauth%2Fapi_scope%2Fsell.marketing&state=5207dc176d9c73dcf4fbba1d0af4cb88","service":"ebay-autods-integration","timestamp":"2025-03-31 22:36:50"}
{"level":"info","message":"No agree button found, continuing with authentication flow","service":"ebay-autods-integration","timestamp":"2025-03-31 22:37:14"}
{"level":"info","message":"Current URL after authentication: https://autods.onrender.com/ebay/callback/store?state=5207dc176d9c73dcf4fbba1d0af4cb88&code=v%5E1.1%23i%5E1%23p%5E3%23I%5E3%23r%5E1%23f%5E0%23t%5EUl41XzI6M0ZCNUM1QUQ0NjcxQ0RBN0Y3QTQ1Mzc2MjYxOTEwMUNfMl8xI0VeMjYw&expires_in=299","service":"ebay-autods-integration","timestamp":"2025-03-31 22:37:14"}
{"level":"info","message":"Successfully redirected to callback URL","service":"ebay-autods-integration","timestamp":"2025-03-31 22:37:14"}
{"level":"info","message":"Saved eBay tokens to database","service":"ebay-autods-integration","timestamp":"2025-03-31 22:37:16"}
{"level":"info","message":"Stopped polling for eBay authorization codes","service":"ebay-autods-integration","timestamp":"2025-03-31 22:37:16"}
{"level":"info","message":"Authorization code processed successfully","service":"ebay-autods-integration","timestamp":"2025-03-31 22:37:16"}
{"level":"info","message":"SIGINT received. Shutting down gracefully","service":"ebay-autods-integration","timestamp":"2025-03-31 22:37:20"}
{"level":"info","message":"Email service initialized successfully","service":"ebay-autods-integration","timestamp":"2025-03-31 22:47:05"}
{"level":"info","message":"Successfully connected to database","service":"ebay-autods-integration","timestamp":"2025-03-31 22:47:08"}
{"level":"info","message":"Fetching products from AutoDS for store IDs: 1173617","service":"ebay-autods-integration","timestamp":"2025-03-31 22:47:08"}
{"level":"info","message":"Database connection initialized for AutoDS API","service":"ebay-autods-integration","timestamp":"2025-03-31 22:47:08"}
{"level":"info","message":"Loaded eBay tokens from database","service":"ebay-autods-integration","timestamp":"2025-03-31 22:47:09"}
{"level":"info","message":"Loaded AutoDS token from database","service":"ebay-autods-integration","timestamp":"2025-03-31 22:47:09"}
{"level":"info","message":"Found 124 products from AutoDS","service":"ebay-autods-integration","timestamp":"2025-03-31 22:47:12"}
{"level":"info","message":"Found 0 existing eBay listings","service":"ebay-autods-integration","timestamp":"2025-03-31 22:47:13"}
{"level":"info","message":"Product 67a4a5e4277e9b3639eade60 has insufficient stock (0), skipping","service":"ebay-autods-integration","timestamp":"2025-03-31 22:47:13"}
{"level":"info","message":"Product 67a4a9c4118ba8c4bf6f15f5 has insufficient stock (0), skipping","service":"ebay-autods-integration","timestamp":"2025-03-31 22:47:13"}
{"level":"info","message":"Product 66fd88d06cc513d2fee57bf4 has insufficient stock (0), skipping","service":"ebay-autods-integration","timestamp":"2025-03-31 22:47:13"}
{"level":"info","message":"Product 673658039242009ac805b70d has insufficient stock (0), skipping","service":"ebay-autods-integration","timestamp":"2025-03-31 22:47:13"}
{"level":"info","message":"Product 66fd87516bc33c9d43a570fd has insufficient stock (0), skipping","service":"ebay-autods-integration","timestamp":"2025-03-31 22:47:13"}
{"level":"info","message":"Product 6732037ae3098601470f60d8 has insufficient stock (0), skipping","service":"ebay-autods-integration","timestamp":"2025-03-31 22:47:13"}
{"level":"info","message":"Found 118 eligible products to list","service":"ebay-autods-integration","timestamp":"2025-03-31 22:47:13"}
{"level":"info","message":"Creating inventory item with key: 67dc086716250b3e4fef9239","service":"ebay-autods-integration","timestamp":"2025-03-31 22:47:14"}
{"inventoryItem":{"availability":{"merchantLocationKey":"WAREHOUSE-001","shipToLocationAvailability":{"quantity":8}},"condition":"NEW","locale":"en-US","packageWeightAndSize":{"weight":{"unit":"POUND","value":"1"}},"product":{"aspects":{"Brand":["ZQNYCY"],"Country/Region of Manufacture":["United States"],"Event & Party":["Yes"],"Festive & Party Supplies":["Yes"],"Figurines":["Yes"],"Holiday & Seasonal D√©cor":["Yes"],"Home & Garden":["Yes"]},"brand":"ZQNYCY","description":"<div>\n<div>\n<p><kse:widget></kse:widget></p>\n\n<p data-end=\"306\" data-start=\"87\">Celebrate Easter with these <strong data-end=\"159\" data-start=\"115\">3/6Pcs Easter Plastic Carrot Candy Boxes</strong>, perfect for storing treats and small gifts. Designed in a fun carrot shape, these boxes add a festive touch to any Easter party or celebration.</p>\n\n<h3 data-end=\"331\" data-start=\"308\"><strong data-end=\"329\" data-start=\"312\">Key Features:</strong></h3>\n\n<ul data-end=\"443\" data-start=\"332\">\n\t<li data-end=\"363\" data-start=\"332\">\n\t<p data-end=\"363\" data-start=\"334\">Available in sets of 3 or 6</p>\n\t</li>\n\t<li data-end=\"392\" data-start=\"364\">\n\t<p data-end=\"392\" data-start=\"366\">Fun carrot-shaped design</p>\n\t</li>\n\t<li data-end=\"443\" data-start=\"393\">\n\t<p data-end=\"443\" data-start=\"395\">Ideal for candy, small gifts, and party favors</p>\n\t</li>\n</ul>\n\n<h3 data-end=\"475\" data-start=\"445\"><strong data-end=\"473\" data-start=\"449\">Included in the Box:</strong></h3>\n\n<ul data-end=\"520\" data-start=\"476\">\n\t<li data-end=\"520\" data-start=\"476\">\n\t<p data-end=\"520\" data-start=\"478\">3 or 6 Easter Plastic Carrot Candy Boxes</p>\n\t</li>\n</ul>\n\n<p data-end=\"593\" data-start=\"522\">Perfect for Easter baskets, party favors, and festive decorations! ü•ïüê∞</p>\n</div>\n</div>\n","imageUrls":["https://i.ebayimg.com/00/s/ODAwWDgwMA==/z/x28AAOSwRftn6cBI/$_3.PNG","https://i.ebayimg.com/00/s/ODAwWDgwMA==/z/mXMAAOSwCoBn6cBJ/$_3.PNG","https://i.ebayimg.com/00/s/ODAwWDgwMA==/z/xT8AAOSwxW9n6cBO/$_3.PNG","https://i.ebayimg.com/00/s/ODAwWDgwMA==/z/ZsMAAOSwihRn6cBR/$_3.PNG","https://i.ebayimg.com/00/s/ODAwWDgwMA==/z/PC0AAOSwe-hn6cBS/$_3.PNG","https://i.ebayimg.com/00/s/ODAwWDgwMA==/z/pxoAAOSwIKNn6cBT/$_3.PNG","https://i.ebayimg.com/00/s/ODAwWDgwMA==/z/PgwAAOSwLINn6cBW/$_3.PNG","https://i.ebayimg.com/00/s/ODAwWDgwMA==/z/lLwAAOSwEmZn6cBX/$_3.PNG","https://i.ebayimg.com/00/s/ODAwWDgwMA==/z/9CQAAOSw1N5n6cBY/$_3.PNG","https://i.ebayimg.com/00/s/ODAwWDgwMA==/z/2Q0AAOSw1e5n6cBa/$_3.PNG","https://i.ebayimg.com/00/s/ODAwWDgwMA==/z/0DIAAOSwY4Nn6cBb/$_3.PNG","https://i.ebayimg.com/00/s/ODAwWDgwMA==/z/kSQAAOSw9Ehn6cBc/$_3.PNG","https://i.ebayimg.com/00/s/ODAwWDgwMA==/z/H50AAOSw-1pn6cBd/$_3.PNG","https://i.ebayimg.com/00/s/ODAwWDgwMA==/z/U-0AAOSwB8Fn6cBe/$_3.PNG"],"mpn":"MPN-1743457634134","title":"3/6Pcs Easter Plastic Carrot Candy Box Creative Gift Boxes Easter Party "}},"inventoryItemKey":"67dc086716250b3e4fef9239","level":"error","merchantLocationKey":"WAREHOUSE-001","message":"Request failed with status code 400","responseData":{"errors":[{"category":"Request","domain":"API_INVENTORY","errorId":25009,"message":"The eBay listing associated with the inventory item, or the unpublished offer has invalid data in the associated Return policy. A return option is missing or not valid. Update your return options.","parameters":[{"name":"0","value":"ReturnsAcceptedOption"}],"subdomain":"Selling"}]},"service":"ebay-autods-integration","stack":"AxiosError: Request failed with status code 400\n    at settle (C:\\Users\\Akinlua\\Documents\\AutoDs\\node_modules\\axios\\dist\\node\\axios.cjs:2031:12)\n    at IncomingMessage.handleStreamEnd (C:\\Users\\Akinlua\\Documents\\AutoDs\\node_modules\\axios\\dist\\node\\axios.cjs:3148:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)\n    at Axios.request (C:\\Users\\Akinlua\\Documents\\AutoDs\\node_modules\\axios\\dist\\node\\axios.cjs:4258:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async EbayAPI.addItem (C:\\Users\\Akinlua\\Documents\\AutoDs\\api\\ebay.js:799:31)\n    at async ProductListingScheduler.run (C:\\Users\\Akinlua\\Documents\\AutoDs\\services\\productListing.js:122:26)\n    at async handleCommandLineTask (C:\\Users\\Akinlua\\Documents\\AutoDs\\app.js:103:9)","statusCode":400,"timestamp":"2025-03-31 22:47:17"}
{"error":"Failed to add item: The eBay listing associated with the inventory item, or the unpublished offer has invalid data in the associated Return policy. A return option is missing or not valid. Update your return options.","level":"error","message":"Error processing product 67dc086716250b3e4fef9239","service":"ebay-autods-integration","timestamp":"2025-03-31 22:47:17"}
{"level":"info","message":"SIGINT received. Shutting down gracefully","service":"ebay-autods-integration","timestamp":"2025-03-31 22:47:18"}
